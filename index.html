<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nghƒ©a Trang Nh√¢n D√¢n S·ªë - Tri·ªáu K√Ω ·ª®c B·∫•t T·ª≠</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Roboto', sans-serif; background-color: #fcfbf7; color: #333; scroll-behavior: smooth; }
        .serif { font-family: 'Playfair Display', serif; }
        
        /* Hi·ªáu ·ª©ng card */
        .card-memorial {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid #e7e5e4;
        }
        .card-memorial:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.05);
            border-color: #d6d3d1;
        }

        /* Hi·ªáu ·ª©ng ·∫£nh grayscale */
        .img-memorial {
            filter: grayscale(100%);
            transition: filter 0.8s ease;
        }
        .card-memorial:hover .img-memorial {
            filter: grayscale(0%);
        }

        /* T√πy ch·ªânh thanh cu·ªôn */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #d6d3d1; border-radius: 10px; }
    </style>
</head>
<body>

<div id="app" class="min-h-screen flex flex-col">
    <nav class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 border-b border-stone-200 p-4">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <div @click="resetView" class="flex items-center gap-3 cursor-pointer">
                <div class="w-10 h-10 bg-stone-800 rounded-full flex items-center justify-center">
                    <span class="text-white font-serif text-xl">üáªüá≥</span>
                </div>
                <h1 class="serif text-xl font-bold tracking-tighter text-stone-800 uppercase">
                    Nghƒ©a Trang Nh√¢n D√¢n S·ªë
                </h1>
            </div>
            
            <div class="flex flex-wrap gap-2 w-full md:w-auto">
                <div class="relative flex-grow md:w-80">
                    <input v-model="searchTerm" type="text" placeholder="T√¨m t√™n, qu√™ qu√°n, ƒë∆°n v·ªã..." 
                        class="w-full px-5 py-2.5 bg-stone-100 rounded-2xl text-sm outline-none focus:ring-2 focus:ring-stone-300 border-none transition-all">
                </div>
                
                <select v-model="filterType" class="px-4 py-2.5 bg-stone-100 rounded-2xl text-sm outline-none border-none cursor-pointer">
                    <option value="">T·∫•t c·∫£ ƒë·ªëi t∆∞·ª£ng</option>
                    <option value="li·ªát sƒ©">Anh h√πng/Li·ªát sƒ©</option>
                    <option value="ng∆∞·ªùi n∆∞·ªõc ngo√†i">Ng∆∞·ªùi n∆∞·ªõc ngo√†i</option>
                    <option value="ki·ªÅu b√†o">Ki·ªÅu b√†o</option>
                    <option value="d√¢n th∆∞·ªùng">D√¢n th∆∞·ªùng</option>
                </select>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 py-12 flex-grow w-full">
        <div v-if="!selectedPerson">
            <header class="mb-12 text-center md:text-left">
                <h2 class="serif text-4xl text-stone-700 font-bold">Kh√¥ng Gian T∆∞·ªüng Ni·ªám</h2>
                <div class="h-1 w-20 bg-stone-800 mt-4 mb-2 mx-auto md:mx-0"></div>
                <p class="text-stone-400 text-sm uppercase tracking-widest">ƒêang hi·ªÉn th·ªã {{ filteredMemorials.length }} ng∆∞·ªùi th√¢n y√™u</p>
            </header>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <div v-for="person in filteredMemorials" :key="person.id" 
                    @click="loadDetail(person)"
                    class="bg-white rounded-3xl p-6 card-memorial cursor-pointer flex flex-col items-center text-center">
                    
                    <div class="relative mb-6">
                        <img :src="person.img || lotusImage" 
                             class="w-28 h-28 rounded-full object-cover img-memorial ring-8 ring-stone-50 shadow-inner">
                        <div class="absolute -bottom-2 bg-stone-800 text-white text-[8px] px-3 py-1 rounded-full uppercase tracking-widest shadow-lg">
                            {{ person.type }}
                        </div>
                    </div>
                    
                    <h3 class="serif text-xl font-bold text-stone-800 leading-tight mb-2">{{ person.name }}</h3>
                    <p class="text-xs text-stone-400 font-medium mb-4">{{ person.birth }} ‚Äî {{ person.death }}</p>

                    <div class="mt-auto w-full flex justify-center gap-6 pt-4 border-t border-stone-50">
                        <div class="flex flex-col">
                            <span class="text-[10px] text-stone-400 uppercase tracking-tighter">Tri √¢n</span>
                            <span class="text-xs font-bold text-orange-600">üî• {{ person.candles }}</span>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-[10px] text-stone-400 uppercase tracking-tighter">D√¢ng hoa</span>
                            <span class="text-xs font-bold text-emerald-600">üå∏ {{ person.flowers }}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-16 text-center">
                <button v-if="hasMore" @click="displayLimit += 24" 
                    class="px-10 py-3 bg-stone-800 text-white rounded-full text-sm font-bold hover:bg-stone-700 transition shadow-xl">
                    T·∫£i th√™m k√Ω ·ª©c...
                </button>
                <p v-else class="text-stone-300 italic text-sm">--- B·∫°n ƒë√£ xem h·∫øt danh s√°ch ---</p>
            </div>
        </div>

        <div v-else class="max-w-5xl mx-auto">
            <button @click="selectedPerson = null" class="mb-8 text-stone-400 hover:text-stone-800 flex items-center gap-2 font-medium transition-colors">
                <span class="text-xl">‚Üê</span> Quay l·∫°i danh s√°ch
            </button>

            <div class="bg-white rounded-[3rem] shadow-2xl overflow-hidden border border-stone-100 flex flex-col md:flex-row card-shadow">
                <div class="md:w-2/5 bg-stone-50/50 p-12 flex flex-col items-center text-center border-r border-stone-100">
                    <img :src="selectedPerson.img || lotusImage" 
                         class="w-56 h-56 rounded-full object-cover shadow-2xl border-8 border-white mb-8 grayscale">
                    
                    <h2 class="serif text-3xl font-bold text-stone-800 mb-2">{{ selectedPerson.name }}</h2>
                    <p class="text-stone-400 tracking-widest text-sm font-bold mb-8 italic">{{ selectedPerson.birth }} ‚Äî {{ selectedPerson.death }}</p>
                    
                    <div class="w-full space-y-3">
                        <button @click="interact('candles')" class="w-full py-4 bg-white border border-stone-200 rounded-2xl hover:bg-orange-50 hover:border-orange-200 transition-all flex justify-between px-6 shadow-sm">
                            <span class="flex items-center gap-2 font-medium">üî• Th·∫Øp n√©n t√¢m nhang</span> 
                            <b class="text-orange-700">{{ selectedPerson.candles }}</b>
                        </button>
                        <button @click="interact('flowers')" class="w-full py-4 bg-white border border-stone-200 rounded-2xl hover:bg-emerald-50 hover:border-emerald-200 transition-all flex justify-between px-6 shadow-sm">
                            <span class="flex items-center gap-2 font-medium">üå∏ D√¢ng ƒëo√° hoa t∆∞∆°i</span> 
                            <b class="text-emerald-700">{{ selectedPerson.flowers }}</b>
                        </button>
                    </div>
                </div>

                <div class="md:w-3/5 p-12 lg:p-16">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
                        <div class="p-6 bg-stone-50 rounded-3xl">
                            <h5 class="text-[10px] uppercase font-bold text-stone-400 mb-2 tracking-widest">Qu√™ qu√°n d√¢n ch√≠nh</h5>
                            <p class="text-stone-800 font-medium" v-if="selectedPerson.home">
                                {{ selectedPerson.home.c }}<br>
                                {{ selectedPerson.home.d }}, {{ selectedPerson.home.p }}
                            </p>
                        </div>
                        <div class="p-6 bg-stone-50 rounded-3xl text-stone-800">
                            <h5 class="text-[10px] uppercase font-bold text-stone-400 mb-2 tracking-widest">N∆°i an ngh·ªâ vƒ©nh h·∫±ng</h5>
                            <p class="font-medium mb-1">{{ selectedPerson.rest }}</p>
                            <p class="text-xs text-stone-400 italic">Qu·ªëc gia: {{ selectedPerson.country }}</p>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="text-[10px] uppercase font-bold text-stone-400 mb-6 tracking-[0.3em] border-b border-stone-100 pb-3">Ti·ªÉu s·ª≠ & Ghi ch√©p l·ªãch s·ª≠</h4>
                        <div class="text-stone-600 leading-loose text-lg whitespace-pre-line italic font-light">
                            "{{ selectedPerson.bio }}"
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="py-12 text-center text-stone-400 text-[10px] uppercase tracking-[0.4em] mt-10">
        Tri √¢n nh·ªØng linh h·ªìn b·∫•t t·ª≠ ‚Ä¢ 2026 Digital Memorial System
    </footer>
</div>

<script type="module">
    // K·∫øt n·ªëi v·ªõi file database.js c·ªßa b·∫°n
    import { db_ls, db_qq, db_dc } from './database.js';

    const { createApp } = Vue;

    createApp({
        data() {
            return {
                searchTerm: '',
                filterType: '',
                selectedPerson: null,
                displayLimit: 24, // Gi·ªõi h·∫°n hi·ªán ƒë·ªÉ m∆∞·ª£t m√°y (Lazy Load)
                allLietsi: db_ls,
                // Link ·∫£nh hoa sen tr·∫Øng trang tr·ªçng cho ng∆∞·ªùi qu√° c·ªë
                lotusImage: 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?q=80&w=400&h=400&fit=crop'
            }
        },
        computed: {
            filteredMemorials() {
                let filtered = this.allLietsi.filter(p => {
                    const searchLower = this.searchTerm.toLowerCase();
                    // T√¨m theo t√™n ho·∫∑c t·ªânh th√†nh
                    const home = db_qq[p.id] || { p: '' };
                    const matchSearch = p.name.toLowerCase().includes(searchLower) || 
                                       home.p.toLowerCase().includes(searchLower);
                    
                    const matchType = this.filterType ? p.type === this.filterType : true;
                    return matchSearch && matchType;
                });
                return filtered.slice(0, this.displayLimit);
            },
            hasMore() {
                return this.displayLimit < this.allLietsi.length;
            }
        },
        methods: {
            loadDetail(person) {
                // Gh√©p n·ªëi ID ƒë·ªÉ l·∫•y th√¥ng tin t·ª´ c√°c ph·∫ßn kh√°c nhau trong database.js
                const homeInfo = db_qq[person.id] || { p: 'Ch∆∞a r√µ', d: 'Ch∆∞a r√µ', c: 'Ch∆∞a r√µ' };
                const extraInfo = db_dc[person.id] || { r: 'ƒêang c·∫≠p nh·∫≠t', ct: 'Vi·ªát Nam', bio: 'Th√¥ng tin ti·ªÉu s·ª≠ ƒëang ƒë∆∞·ª£c ch√∫ng t√¥i s∆∞u t·∫ßm v√† c·∫≠p nh·∫≠t s·ªõm nh·∫•t.' };

                this.selectedPerson = {
                    ...person,
                    home: homeInfo,
                    rest: extraInfo.r,
                    country: extraInfo.ct,
                    bio: extraInfo.bio
                };
                // Cu·ªôn l√™n ƒë·∫ßu trang khi xem chi ti·∫øt
                window.scrollTo({ top: 0, behavior: 'smooth' });
            },
            resetView() {
                this.selectedPerson = null;
                this.searchTerm = '';
                this.filterType = '';
                this.displayLimit = 24;
            },
            interact(type) {
                this.selectedPerson[type]++;
                // Logic ƒë·ªÉ l∆∞u s·ªë l∆∞·ª£ng v√†o server ho·∫∑c LocalStorage c√≥ th·ªÉ th√™m ·ªü ƒë√¢y
            }
        }
    }).mount('#app');
</script>
</body>
</html>
